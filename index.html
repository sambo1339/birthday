<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>For Ananya ðŸŒŒ</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600;700&family=Poppins:wght@300;400;500&display=swap" rel="stylesheet">
<style>
/* Global Performance Reset */
* { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

body {
    margin: 0;
    font-family: 'Poppins', sans-serif;
    color: #f8fafc;
    background: #050505; /* Solid dark fallback */
    background-image: linear-gradient(rgba(0,0,0,0.6), rgba(0,0,0,0.8)), url('baground.jpg');
    background-size: cover;
    background-position: center;
    background-attachment: fixed;
    min-height: 100vh;
}

/* DEGRADED BACKGROUND: Removed Glass Blur for Speed */
.glass {
    position: relative;
    background: rgba(15, 15, 20, 0.85); /* Simple solid dark tint */
    border: 1px solid rgba(255, 255, 255, 0.1);
    border-radius: 20px;
    padding: 30px 20px;
    width: min(94vw, 900px);
    margin: 20px auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 25px;
    align-items: center;
    box-shadow: 0 10px 30px rgba(0,0,0,0.5);
}

@media (max-width: 768px) {
    .glass { 
        grid-template-columns: 1fr; 
        text-align: center; 
        margin-top: 10px;
        padding: 20px 15px;
    }
    .photo-col { order: -1; } /* Photo on top for better mobile flow */
}

/* Start Screen */
#startScreen {
    position: fixed; inset: 0;
    background: #000;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    z-index: 100; transition: opacity 0.5s ease;
}

.main-title {
    font-family: 'Playfair Display', serif;
    font-size: clamp(30px, 8vw, 55px);
    color: #fff;
    text-align: center;
    margin-bottom: 20px;
}

.container {
    opacity: 0; 
    transition: opacity 0.5s ease;
    padding-bottom: 50px;
}
.container.show { opacity: 1; }

.btn {
    padding: 12px 28px;
    font-size: 15px;
    border: none; border-radius: 50px;
    background: #a855f7; /* Solid color is faster than gradients */
    color: white; cursor: pointer;
    font-weight: 500;
}

/* Simple Photo Frame */
.photo-frame {
    width: min(260px, 70vw);
    aspect-ratio: 4/5;
    border-radius: 15px;
    overflow: hidden;
    margin: 0 auto;
    border: 2px solid rgba(255,255,255,0.1);
}

.photo-frame img {
    width: 100%; height: 100%; object-fit: cover;
    transition: opacity 0.4s ease;
}

/* Efficient Canvas */
#starTextCanvas {
    position: fixed; inset: 0;
    pointer-events: none; z-index: 2;
}

/* Info Modal */
.info-modal {
    position: fixed; inset: 0;
    background: rgba(0,0,0,0.9);
    display: none; align-items: center; justify-content: center;
    z-index: 1000; padding: 20px;
}
.info-modal.show { display: flex; }
.info-card {
    background: #111; padding: 25px;
    border-radius: 15px; border: 1px solid #333;
    max-width: 400px; text-align: center;
}

.sub { color: #cbd5e1; font-size: 14px; line-height: 1.6; }
</style>
</head>
<body>

<div id="startScreen">
    <h1 class="main-title">For Ananya ðŸŒ™</h1>
    <button class="btn" onclick="startExperience()">Tap to Open âœ¨</button>
</div>

<div class="container" id="mainContent">
    <div class="glass">
        <div class="text-col">
            <h1 class="main-title" style="font-size: 28px;">Happy Birthday</h1>
            <p class="sub">Tonight the stars shine a little softer just to celebrate someone as special as you. Keep dreaming. ðŸ’«</p>
            <button class="btn" onclick="formStarText()" style="margin-top:10px; font-size:13px;">Reveal Creator âœ¨</button>
            <p onclick="openInfo()" style="color:#a855f7; cursor:pointer; margin-top:20px; font-size:12px;">[ Read Secret Message ]</p>
        </div>

        <div class="photo-col">
            <div class="photo-frame">
                <img id="slide" src="photo1.jpeg" alt="memories">
            </div>
        </div>
    </div>
</div>

<canvas id="starTextCanvas"></canvas>

<div class="info-modal" id="infoModal">
    <div class="info-card">
        <h3>Secret Message ðŸ’Œ</h3>
        <p class="sub">This little universe was made just to make you smile. Everything here is carefully calculated to show you how special you are. Happy Birthday! ðŸŒ™âœ¨</p>
        <button class="btn" onclick="closeInfo()">Close</button>
    </div>
</div>

<audio id="bgMusic" loop>
    <source src="bgmusic.m4a" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("starTextCanvas");
const ctx = canvas.getContext("2d", { alpha: true });
let particles = [];
let animationId = null;

function startExperience() {
    document.getElementById("startScreen").style.opacity = "0";
    setTimeout(() => {
        document.getElementById("startScreen").style.display = "none";
        document.getElementById("mainContent").classList.add("show");
    }, 500);
    
    const music = document.getElementById("bgMusic");
    music.volume = 0.4;
    music.play().catch(() => {});
}

// Low-Impact Slideshow
const images = ["photo1.jpeg", "photo2.jpeg", "photo3.jpeg"];
let idx = 0;
const slideEl = document.getElementById("slide");
setInterval(() => {
    slideEl.style.opacity = "0.2";
    setTimeout(() => {
        idx = (idx + 1) % images.length;
        slideEl.src = images[idx];
        slideEl.style.opacity = "1";
    }, 400);
}, 4500);

// Performance-Focused Star Text
function formStarText() {
    if (animationId) cancelAnimationFrame(animationId);
    
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    const fontSize = window.innerWidth < 600 ? 35 : 60;
    ctx.font = `bold ${fontSize}px serif`;
    ctx.fillStyle = "white";
    ctx.textAlign = "center";
    
    const lines = ["Happy Birthday", "from Unknown"];
    ctx.clearRect(0,0, canvas.width, canvas.height);
    lines.forEach((line, i) => {
        ctx.fillText(line, canvas.width/2, (canvas.height/2) + (i * (fontSize + 10)));
    });

    const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
    particles = [];
    
    // Very high gap for mobile performance
    const gap = window.innerWidth < 600 ? 8 : 5; 

    for (let y = 0; y < canvas.height; y += gap) {
        for (let x = 0; x < canvas.width; x += gap) {
            const index = (y * canvas.width + x) * 4;
            if (imageData[index + 3] > 128) {
                particles.push({
                    x: Math.random() * canvas.width,
                    y: Math.random() * canvas.height,
                    tx: x,
                    ty: y,
                    s: Math.random() * 1.2 + 0.4
                });
            }
        }
    }
    animate();
}

function animate() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    let moving = false;

    for(let i=0; i < particles.length; i++) {
        let p = particles[i];
        const dx = p.tx - p.x;
        const dy = p.ty - p.y;
        
        p.x += dx * 0.1;
        p.y += dy * 0.1;

        ctx.fillStyle = "white";
        ctx.fillRect(p.x, p.y, p.s, p.s); // Using fillRect is faster than arc()
        
        if (Math.abs(dx) > 0.5) moving = true;
    }

    if (moving) {
        animationId = requestAnimationFrame(animate);
    }
}

function openInfo() { document.getElementById('infoModal').classList.add('show'); }
function closeInfo() { document.getElementById('infoModal').classList.remove('show'); }
</script>

</body>
</html>
